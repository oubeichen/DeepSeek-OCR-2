# DeepSeek-OCR-2 API Server Configuration
# Copy this file to .env and modify as needed
#
# All variables use prefix: DEEPSEEK_OCR_
# Priority: CLI args > Environment variables > .env file > defaults

# ============================================================
# Model Settings
# ============================================================
# Model path (HuggingFace model ID or local path)
DEEPSEEK_OCR_MODEL_PATH=deepseek-ai/DeepSeek-OCR2-Pro

# Model data type: bfloat16, float16, float32
DEEPSEEK_OCR_DTYPE=bfloat16

# Trust remote code from HuggingFace
DEEPSEEK_OCR_TRUST_REMOTE_CODE=true

# ============================================================
# GPU Settings
# ============================================================
# GPU memory utilization ratio (0.1 - 1.0)
DEEPSEEK_OCR_GPU_MEMORY_UTILIZATION=0.9

# Tensor parallel size (number of GPUs)
DEEPSEEK_OCR_TENSOR_PARALLEL_SIZE=1

# CUDA visible devices (comma-separated GPU IDs)
DEEPSEEK_OCR_CUDA_VISIBLE_DEVICES=0

# ============================================================
# vLLM Engine Settings
# ============================================================
# Maximum model context length
DEEPSEEK_OCR_MAX_MODEL_LEN=16384

# Block size for KV cache
DEEPSEEK_OCR_BLOCK_SIZE=16

# Use eager mode (disable CUDA graphs)
DEEPSEEK_OCR_ENFORCE_EAGER=true

# Swap space in GB
DEEPSEEK_OCR_SWAP_SPACE=4

# Maximum number of sequences
DEEPSEEK_OCR_MAX_NUM_SEQS=256

# Disable multimodal preprocessor cache
DEEPSEEK_OCR_DISABLE_MM_PREPROCESSOR_CACHE=true

# ============================================================
# Sampling Settings
# ============================================================
# Sampling temperature (0.0 for deterministic)
DEEPSEEK_OCR_TEMPERATURE=0.0

# Maximum tokens to generate
DEEPSEEK_OCR_MAX_TOKENS=8192

# N-gram size for repetition penalty
DEEPSEEK_OCR_NGRAM_SIZE=20

# Window size for N-gram check
DEEPSEEK_OCR_WINDOW_SIZE=100

# Skip special tokens in output
DEEPSEEK_OCR_SKIP_SPECIAL_TOKENS=true

# ============================================================
# Image Processing Settings
# ============================================================
# Enable dynamic cropping
DEEPSEEK_OCR_CROP_MODE=true

# Minimum number of crops
DEEPSEEK_OCR_MIN_CROPS=2

# Maximum number of crops
DEEPSEEK_OCR_MAX_CROPS=6

# Local view image size
DEEPSEEK_OCR_IMAGE_SIZE=768

# Global view base size
DEEPSEEK_OCR_BASE_SIZE=1024

# ============================================================
# PDF Processing Settings
# ============================================================
# PDF to image conversion DPI
DEEPSEEK_OCR_PDF_DPI=200

# Page separator in output
DEEPSEEK_OCR_PAGE_SEPARATOR=\n\n---\n\n

# Skip pages with repeated/incomplete content
DEEPSEEK_OCR_SKIP_REPEAT_PAGES=true

# ============================================================
# Server Settings
# ============================================================
# Server host
DEEPSEEK_OCR_HOST=0.0.0.0

# Server port
DEEPSEEK_OCR_PORT=8000

# Engine mode: sync or async
DEEPSEEK_OCR_ENGINE_MODE=sync

# Number of preprocessing workers
DEEPSEEK_OCR_NUM_WORKERS=64

# ============================================================
# Prompt Settings
# ============================================================
# Default OCR prompt
DEEPSEEK_OCR_DEFAULT_PROMPT=OCR with format
